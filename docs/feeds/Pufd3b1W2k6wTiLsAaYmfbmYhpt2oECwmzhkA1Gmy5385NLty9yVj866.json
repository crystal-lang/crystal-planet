{"id":"Pufd3b1W2k6wTiLsAaYmfbmYhpt2oECwmzhkA1Gmy5385NLty9yVj866","title":"Crystal Forum - Latest topics","displayTitle":"Forum","url":"https://forum.crystal-lang.org/latest.rss","feedLink":"https://forum.crystal-lang.org/latest","isQuery":false,"isEmpty":false,"isHidden":false,"itemCount":30,"items":[{"title":"Upcoming release 1.17.0","url":"https://forum.crystal-lang.org/t/upcoming-release-1-17-0/8184","date":1750935246,"author":"straight-shoota","guid":36,"unread":true,"content":"<p>The next Crystal release,  is scheduled for .</p><p>As usual, this is precluded by a two-week feature , starting . We’ll be using this time until the release to consolidate the changes and fix bugs.</p><ul><li> only on TTY by default</li><li>New compiler tool </li><li>Stabilized execution contexts</li></ul><p>There will be further additions to these resources as we merge additional changes.</p><p>The nightly builds serve as previews of the upcoming release. Please <strong>test your code base against nightly builds</strong> and report any regressions <img src=\"https://emoji.discourse-cdn.com/google_classic/person_bowing.png?v=14\" title=\":person_bowing:\" alt=\":person_bowing:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>","contentLength":484,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"About openssl signature","url":"https://forum.crystal-lang.org/t/about-openssl-signature/8183","date":1750926074,"author":"Fulgurance","guid":35,"unread":true,"content":"<p>Hi guys, I am actually coding a authenticity check for my package manager, where I will check a package signature.</p><p>What do you suggest me about it? What parameter should I use to generate a very secure private key ?</p>","contentLength":214,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"ToCry a fancy ToDo/Kanban web app","url":"https://forum.crystal-lang.org/t/tocry-a-fancy-todo-kanban-web-app/8181","date":1750639198,"author":"ralsina","guid":34,"unread":true,"content":"<p>I got sick of limitations in a ToDO app I was using and thought “this can’t be too hard, can it?” and it wasn’t.</p><p>Will in the future make it multiboard/multiuser but is currently “Just Enough App®️” for me</p>","contentLength":218,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Upload image failed use HTTP::Client but test with postman work","url":"https://forum.crystal-lang.org/t/upload-image-failed-use-http-client-but-test-with-postman-work/8171","date":1750308882,"author":"zw963","guid":33,"unread":true,"content":"<p>Following is my code (I need form_data to upload a file, but for now,  test with a <code>source:  \"https://image_url\"</code> is enough.</p><pre><code>post \"/api/upload\" do\n    # file_path = params.from_multipart.last[\"source\"].path\n\n    io = IO::Memory.new\n\n    form_data = HTTP::FormData::Builder.new(io)\n    form_data.field(\"key\", \"my_key\")\n    form_data.field(\"source\", \"https://avatars.githubusercontent.com/u/549126?s=96&amp;v=4\")\n\n    response = HTTP::Client.post(\n      url: \"https://freeimage.host/api/1/upload\",\n      headers: HTTP::Headers{\"Content-Type\" =&gt; \"multipart/form-data\"},\n      form: io\n    )\n\n    pp! response\n    if response.success?\n      image_url = JSON.parse(response.body).dig(\"image\", \"display_url\")\n      json({image_url: image_url}, HTTP::Status::OK)\n    else\n      json(HTTP::Status::BAD_REQUEST)\n    end\n  end\n</code></pre><p>When I upload,  I always get error like this:</p><pre><code>{\\\"status_code\\\":400,\\\"error\\\":{\\\"message\\\":\\\"Invalid API v1 key.\\\",\\\"code\\\":100},\\\"status_txt\\\":\\\"Bad Request\\\"}\"\n</code></pre><p>But if i test use a tool like postman, it works (check following screenshot)</p><p>Following is the screenshot of API page</p><blockquote><p>Either a image URL or a base64 encoded image string. You can also use FILES[“source”] in your request.</p></blockquote><p>What is the means of <code>FILES[\"source\"] in your request</code>, how to do that use ?</p><p><small>16 posts - 5 participants</small></p>","contentLength":1290,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Mixing Crystal with Go and Exlixr","url":"https://forum.crystal-lang.org/t/mixing-crystal-with-go-and-exlixr/8169","date":1750269229,"author":"jzakiya","guid":32,"unread":true,"content":"<img width=\"420\" height=\"420\" src=\"https://canada1.discourse-cdn.com/flex036/uploads/crystal_lang/original/2X/0/0d850b3dfa0209617548dd4ea67b6067162cb64f.png\" data-dominant-color=\"696969\"><p>At Mozi, we needed to connect a new Elixir Phoenix LiveView app to an existing Go backend. This is how we did it.  …</p>","contentLength":118,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"A blog post about using Google Sheets API with Crystal","url":"https://forum.crystal-lang.org/t/a-blog-post-about-using-google-sheets-api-with-crystal/8157","date":1749833904,"author":"Maroo-b","guid":31,"unread":true,"content":"<p>I just published a new blog post on using the <strong>Google Sheets API with Crystal</strong> — it covers the basics of setting things up, handling authentication, and some example code to read/write data.</p><p>I’d appreciate your feedback on the code and structure. I’m particularly interested in best practices for Crystal code.</p><p>Thanks in advance — always looking to learn and refine! <img src=\"https://emoji.discourse-cdn.com/google_classic/folded_hands.png?v=14\" title=\":folded_hands:\" alt=\":folded_hands:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>","contentLength":371,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Install on MacOS 10.13 (High Sierra)","url":"https://forum.crystal-lang.org/t/install-on-macos-10-13-high-sierra/8155","date":1749832297,"author":"procursor","guid":30,"unread":true,"content":"<p>What is the last known Crystal version that works under High Sierra?</p><p>So that I just download precompiled binary from releases which is probably my best option.</p><p>Is it possible to build the latest and greatest preferably from MacPorts (since I have already downloaded and built all toolchain and libraries needed except for Crystal itself)?</p>","contentLength":336,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Do channels need to be manually closed?","url":"https://forum.crystal-lang.org/t/do-channels-need-to-be-manually-closed/8151","date":1749754027,"author":"syeopite","guid":29,"unread":true,"content":"<p>A bit of a dumb question but should channels be explicitly closed after you’re done using them, or is that something the GC will take care of? My instincts are telling me yes but I also do frequently see code that doesn’t explicitly close any of the channels it creates.</p>","contentLength":274,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Catch on nested macros","url":"https://forum.crystal-lang.org/t/catch-on-nested-macros/8150","date":1749751282,"author":"wolfgang371","guid":28,"unread":true,"content":"<p>Dear all, I just had a little surprise (at least to me) that for macro nesting you don’t need to have a  inside a  definition, but this is enough already…</p><pre data-code-wrap=\"crystal\"><code>{% if true %}\n\n# this also counts as a nested macro and needs escaping!\nmacro uint64_from_letters(str)\n    \\{% value = 0_u64 %}\n    \\{% for c in str.chars %}\n        \\{% value = (value &lt;&lt; 8) | (c.ord) %}\n    \\{% end %}\n    \\{{ value }}\nend\n\n{% end %}\n\np uint64_from_letters(\"12345678\")\n</code></pre><p>… and needs escaping. If you don’t - you get misleading error messages like</p><pre data-code-wrap=\"console\"><code>In x.cr:15:17\n\n 15 | {% for c in str.chars %}\n                  ^--\nError: undefined macro variable 'str'\n</code></pre><p>No big deal, just unexpected…</p>","contentLength":660,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Process.run Question","url":"https://forum.crystal-lang.org/t/process-run-question/8149","date":1749741795,"author":"robmullr","guid":27,"unread":true,"content":"<p>I’m trying to use the javascript mermaid command line utility to generate svg graphs from text. From the windows powershell command line,</p><pre><code>\"graph TD\n&gt;&gt; A[Start] --&gt; B{Is it working?}\n&gt;&gt; B -- Yes --&gt; C[Great!]\n&gt;&gt; B -- No --&gt; D[Fix it]\n&gt;&gt; D --&gt; B\" | mmdc -i - -o - | echo\n</code></pre><p>When I run the following code (mostly generated by ChatGPT)),</p><pre><code>heredoc = &lt;&lt;-MERMAID\ngraph TD\nA[Start] --&gt; B{Is it working?}\nB -- Yes --&gt; C[Great!]\nB -- No --&gt; D[Fix it]\nD --&gt; B\nMERMAID\n\nstdin_io = IO::Memory.new\nstdout_io = IO::Memory.new\nstderr_io = IO::Memory.new\nstdin_io.puts heredoc\ncommand = \"mmdc\"\nargs = [\"-i\",\"-\",\"-o\",\"-\"] of String\n\nProcess.run(command, args: args, input: stdin_io, output: stdout_io, error: stderr_io)\n\nputs \"STDOUT:\"\nputs stdout_io.to_s\nunless stderr_io.to_s.empty?\n  puts \"STDERR:\"\n  puts stderr_io.to_s\nend\n</code></pre><p>I get an error: Unhandled exception: Error executing process: ‘mmdc -i - -o -’: The system cannot find the file specified. (File::NotFoundError).</p><p>How should I be formatting and organizing these STDIN and STDOUT to get this working from within Crystal?</p><p><small>14 posts - 4 participants</small></p>","contentLength":1085,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Generate a simple digits captcha image","url":"https://forum.crystal-lang.org/t/generate-a-simple-digits-captcha-image/8148","date":1749725730,"author":"zw963","guid":26,"unread":true,"content":"<p>There are some generate PNG shards. but i don’t know how to make image with text in it.</p><p>I found some example code in <a href=\"https://github.com/watzon/pixie\" rel=\"noopener nofollow ugc\">pixie</a> shards works for what i need,  but the example code not work on my Arch Linux, check <a href=\"https://github.com/watzon/pixie/issues/2\" rel=\"noopener nofollow ugc\">this</a> issue.</p><p>Right now, I just want to make a small, simple picture with some numbers on it. It will be used as a simple check when people sign up on my website.</p>","contentLength":368,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Kemal: is it possible to do the rails equivalent of constraints subdomain?","url":"https://forum.crystal-lang.org/t/kemal-is-it-possible-to-do-the-rails-equivalent-of-constraints-subdomain/8145","date":1749676312,"author":"omgponies","guid":25,"unread":true,"content":"<p>First off, I normally only think of posting here for things specific to strictly only Crystal itself and not projects that  of Crystal (ala Kemal) - but also I have seen others ask Kemal specific questions here. My justification beyond that is perhaps the answer is more Crystal generic and not strictly relevant to Kemal.\nApologies if this is rude to ask here.</p><pre><code>get \"/whatever\" do\n   # my boring code\nend\n</code></pre><p>That allows me to run my boring code when someone goes to <a href=\"http://www.mysite.blah/whatever\" rel=\"noopener nofollow ugc\">http://www.mysite.blah/whatever</a> - very normal route.\nKemal does exactly the same - awesome, very easy, thank you.</p><p>In Rails, I can then say I want api.mysite.blah/whatever to return a JSON payload and www.mysite.blah/whatever to return the HTML payload <a href=\"https://guides.rubyonrails.org/routing.html#segment-constraints\" rel=\"noopener nofollow ugc\">via constraints and subdomain</a>…</p><p>It is not obvious to me if it is possible to do that in Kemal or if there is any reason in Crystal that would prevent the equivalent functionality?</p><p>My web app can function just fine only doing it the basic way and if I really need a separate api-only domain just use a different process - but it would be convenient to handle it all via the routes. It is just not obvious to me how to do that in Kemal and I don’t see any examples close enough that make it clear to me.</p><p>And I specifically am interested in using Kemal and I don’t want a “heavier” framework like Rails - but I do like that one thing from Rails and would love to use it in Kemal/Crystal.</p>","contentLength":1403,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Is there another still working shard search website except shards.info?","url":"https://forum.crystal-lang.org/t/is-there-another-still-working-shard-search-website-except-shards-info/8143","date":1749647895,"author":"zw963","guid":24,"unread":true,"content":"<p>Is there another still working shard search website except shards.info?</p>","contentLength":71,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Crystal Build error issue with libgc on Mac OS 15.5","url":"https://forum.crystal-lang.org/t/crystal-build-error-issue-with-libgc-on-mac-os-15-5/8140","date":1749581799,"author":"mswieboda","guid":23,"unread":true,"content":"<p>I posted a question on StackOverflow, but figured I’d probably get more visibility here, as I see the mailings, etc.</p><p>here’s my question and context:</p><p>ran an into an error, compiling or running a  with  web framework getting started app:</p><pre><code>$ crystal build --link-flags=\"~/.asdf/shims/crystal/embedded/lib/libgc.a\" src/early-registration-api-cr.cr\nclang: error: no such file or directory: '/Users/matt.swieboda@tastytrade.com/.asdf/shims/crystal/embedded/lib/libgc.a'\nError: execution of command failed with exit status 1: cc \"${@}\" -o /Users/matt.swieboda@tastytrade.com/.cache/crystal/Users-matt.swieboda@tastytrade.com-.asdf-installs-crystal-1.16.3-src-ecr-process.cr/macro_run ~/.asdf/shims/crystal/embedded/lib/libgc.a -rdynamic -lgc -liconv\n</code></pre><p>I’m on Mac OS 15.5 Sequoia, on a work laptop, but permissions should be decently set (via  they are fine.  has full permissions, as does the  directory my project is in. I’m using iTerm 2, and . If anyone needs more context/info, I can happily provide it.</p><p>something with  is the issue.</p><p>using  and  outputs:</p><pre><code>$ where crystal\n/Users/matt***/.asdf/shims/crystal\n</code></pre><p>also this is on a work laptop with , and to my knowledge no other  is installed via my  for ex, but perhaps from  command line tools, etc maybe.</p><p><em>can anyone help? Trying to get  over at the company I work for (Tastytrade, USA, based in Chicago, and parent company is IG in London, UK), to speed up the backend, and other interesting use-cases.</em></p><p><em>Thanks so much, in advance! I love the crystal community a lot, and happy to help contribute more and more to it.</em></p><p><small>11 posts - 4 participants</small></p>","contentLength":1581,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Class Method Error","url":"https://forum.crystal-lang.org/t/class-method-error/8135","date":1749409660,"author":"Ferguson","guid":22,"unread":true,"content":"<p>I’m executing some tests on crystal interactive with one module and struct and have error calling one class method as below:</p><pre><code>crystal i\nCrystal interpreter 1.16.3 (2025-05-12).\nEXPERIMENTAL SOFTWARE: if you find a bug, please consider opening an issue in\nhttps://github.com/crystal-lang/crystal/issues/new/\nicr:1&gt;  module Space\nicr:2&gt;    struct Age\nicr:3&gt;      ORBITALS = {\nicr:4&gt;        \"Mercury\" =&gt; 0.2408467,\nicr:5&gt;        \"Venus\"   =&gt; 0.61519726,\nicr:6&gt;        \"Earth\"   =&gt; 1.0,\nicr:7&gt;        \"Mars\"    =&gt; 1.8808158,\nicr:8&gt;        \"Jupiter\" =&gt; 11.862615,\nicr:9&gt;        \"Saturn\"  =&gt; 29.447498,\nicr:10&gt;       \"Uranus\"  =&gt; 84.016846,\nicr:11&gt;       \"Neptune\" =&gt; 164.79132,\nicr:12&gt;     }\nicr:13&gt; \nicr:14&gt;     EARTH_YEAR = 31_557_600\nicr:15&gt;     @@age : Int64 = 0\nicr:16&gt; \nicr:17&gt;     def self.from_seconds(sec : Int64)\nicr:18&gt;       @@age = sec\nicr:19&gt;     end\nicr:20&gt; \nicr:21&gt;     def self.age_on_earth\nicr:22&gt;       (@@age/EARTH_YEAR).round(2)\nicr:23&gt;     end\nicr:24&gt; \nicr:25&gt;     def self.age_on_mercury\nicr:26&gt;       (@@age/EARTH_YEAR/ORBITALS[\"Mercury\"]).round(2)\nicr:27&gt;     end\nicr:28&gt; \nicr:29&gt;     def self.age_on_venus\nicr:30&gt;       (@@age/EARTH_YEAR/ORBITALS[\"Venus\"]).round(2)\nicr:31&gt;     end\nicr:32&gt; \nicr:33&gt;     def self.age_on_mars\nicr:34&gt;       (@@age/EARTH_YEAR/ORBITALS[\"Mars\"]).round(2)\nicr:35&gt;     end\nicr:36&gt; \nicr:37&gt;     def self.age_on_jupiter\nicr:38&gt;       (@@age/EARTH_YEAR/ORBITALS[\"Jupiter\"]).round(2)\nicr:39&gt;     end\nicr:40&gt; \nicr:41&gt;     def self.age_on_saturn\nicr:42&gt;       (@@age/EARTH_YEAR/ORBITALS[\"Neptune\"]).round(2)\nicr:43&gt;     end\nicr:44&gt;   end\nicr:45&gt; end\n =&gt; nil\nicr:46&gt; Space::Age.from_seconds(1000000000).age_on_earth\nerror in line 1\nError: undefined method 'age_on_earth' for Int64\n</code></pre><p>Please I need help because don’t understand that error. To me nothing incorrect on module and class.</p>","contentLength":1823,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Should this be a shard? A BakedFileHandler for Kemal","url":"https://forum.crystal-lang.org/t/should-this-be-a-shard-a-bakedfilehandler-for-kemal/8133","date":1749246460,"author":"ralsina","guid":21,"unread":true,"content":"<p>It’s what it says in the topic: a thing that lets you serve files baked into the binary using Kemal.</p><p>I wrote it for myself and it’s small, but it  be useful in general? Not sure.</p><p><small>11 posts - 4 participants</small></p>","contentLength":206,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Rewrite the ruby version of rbtris(which use ruby2d gem) use sdl.cr, the screen refresh doesn't seem to work correctly","url":"https://forum.crystal-lang.org/t/rewrite-the-ruby-version-of-rbtris-which-use-ruby2d-gem-use-sdl-cr-the-screen-refresh-doesnt-seem-to-work-correctly/8132","date":1749199709,"author":"zw963","guid":20,"unread":true,"content":"","contentLength":0,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"C-bindings on windows","url":"https://forum.crystal-lang.org/t/c-bindings-on-windows/8129","date":1749123550,"author":"lemmuh","guid":19,"unread":true,"content":"<p>I have a DLL which provides several functions which I want to call inside my crystal app.</p><p>Does the C-binding work on windows ?</p><p>Can anybody recommend a shards as an example ?</p>","contentLength":171,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Check if a string is a number","url":"https://forum.crystal-lang.org/t/check-if-a-string-is-a-number/8121","date":1749021228,"author":"Fulgurance","guid":18,"unread":true,"content":"<p>Hi guys, I have just one stupid question. I didn’t find in the documentation ( maybe I missed something?).</p><p>How can I check if a string is a number or just a text ?</p>","contentLength":164,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"New \"meta\" shard","url":"https://forum.crystal-lang.org/t/new-meta-shard/8120","date":1748967052,"author":"zw963","guid":17,"unread":true,"content":"<p>All honors belong to the original author <a href=\"https://forum.crystal-lang.org/u/asterite\">@asterite</a></p><p>I use it locally often, but I’m just too lazy and haven’t released it as a shard before.</p><p>the original forum duscusstion is <a href=\"https://forum.crystal-lang.org/t/print-out-the-instance-methods-defined-class-or-the-path-where-the-current-class-is/4771/2\">here</a></p><p>For how to use it, check the <a href=\"https://github.com/crystal-china/meta/blob/master/spec/meta_spec.cr\" rel=\"noopener nofollow ugc\">spec</a> directly.</p>","contentLength":223,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Prefered way to profile memory usage of a Crystal program?","url":"https://forum.crystal-lang.org/t/prefered-way-to-profile-memory-usage-of-a-crystal-program/8118","date":1748836071,"author":"Fijxu","guid":16,"unread":true,"content":"<p>Title, there is a preferred way to check the memory usage of each part of the program? Does tools like  just work as is for memory profiling or there is something better for Crystal due to the use of GC?</p>","contentLength":203,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"How to express \"pointer to this instance\"?","url":"https://forum.crystal-lang.org/t/how-to-express-pointer-to-this-instance/8117","date":1748802972,"author":"AlexR","guid":15,"unread":true,"content":"<p>How do I express  in code?</p><pre><code>class ColorSampler\n  ...\n\n  def handle_mouse_up()\n    ev = LibSDL::Event.new\n    ...\n    ev.user.data1 = pointerof(self)\n    ...\n\n    LibSDL.push_event(pointerof(ev))\n  end\nend\n</code></pre><pre><code>| ev.user.data1 = pointerof(self)\nError: can't take address of self\n</code></pre>","contentLength":271,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"There might be cases where the openssl version detection does not work correctly in MinGW","url":"https://forum.crystal-lang.org/t/there-might-be-cases-where-the-openssl-version-detection-does-not-work-correctly-in-mingw/8115","date":1748752348,"author":"kojix2","guid":14,"unread":true,"content":"<p>I am having trouble compiling the sample program with MinGW, and I suspect (but am not certain) that the openssl version detection is not working in <a href=\"https://github.com/crystal-lang/crystal/blob/master/src/openssl/lib_ssl.cr\">src/openssl/lib_ssl.cr</a>.</p><p>I should break the problem down a bit more to identify it, but I’m too lazy to report it, so I’ll just note it here.</p><pre><code>D:/a/_temp/msys64/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/15.1.0/../../../../x86_64-w64-mingw32/bin/ld.exe: _main.o0.obj: in function `__crystal_main':\nD:\\a\\_temp\\msys64\\mingw64\\share\\crystal\\src\\openssl/lib_ssl.cr:304:(.text+0x3e9): undefined reference to `SSL_library_init'\nD:/a/_temp/msys64/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/15.1.0/../../../../x86_64-w64-mingw32/bin/ld.exe: D:\\a\\_temp\\msys64\\mingw64\\share\\crystal\\src\\openssl/lib_ssl.cr:304:(.text+0x3ee): undefined reference to `SSL_load_error_strings'\nD:/a/_temp/msys64/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/15.1.0/../../../../x86_64-w64-mingw32/bin/ld.exe: D:\\a\\_temp\\msys64\\mingw64\\share\\crystal\\src\\openssl/lib_ssl.cr:304:(.text+0x3f3): undefined reference to `OPENSSL_add_all_algorithms_noconf'\nD:/a/_temp/msys64/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/15.1.0/../../../../x86_64-w64-mingw32/bin/ld.exe: D:\\a\\_temp\\msys64\\mingw64\\share\\crystal\\src\\openssl/lib_ssl.cr:304:(.text+0x3f8): undefined reference to `ERR_load_crypto_strings'\nD:/a/_temp/msys64/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/15.1.0/../../../../x86_64-w64-mingw32/bin/ld.exe: D-igest5858M-D-5.o0.obj: in function `new_evp_mt_ctx':\nD:\\a\\_temp\\msys64\\mingw64\\share\\crystal\\src\\openssl/digest.cr:26:(.text+0xec): undefined reference to `EVP_MD_CTX_create'\nD:/a/_temp/msys64/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/15.1.0/../../../../x86_64-w64-mingw32/bin/ld.exe: D-igest5858M-D-5.o0.obj: in function `finalize':\nD:\\a\\_temp\\msys64\\mingw64\\share\\crystal\\src\\openssl/digest.cr:38:(.text+0x179): undefined reference to `EVP_MD_CTX_destroy'\nD:/a/_temp/msys64/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/15.1.0/../../../../x86_64-w64-mingw32/bin/ld.exe: D-igest5858M-D-5.o0.obj: in function `digest_size':\nD:\\a\\_temp\\msys64\\mingw64\\share\\crystal\\src\\openssl/digest.cr:77:(.text+0x8bd): undefined reference to `EVP_MD_size'\n</code></pre>","contentLength":2151,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"SDL Event and UserEvent questions","url":"https://forum.crystal-lang.org/t/sdl-event-and-userevent-questions/8114","date":1748716908,"author":"AlexR","guid":13,"unread":true,"content":"<p>This (SDL client) code will not compile. How to fix it?</p><pre><code># app.cr\nclass ColorPicker\n  property color : UInt32\n  def initialize(@color)\n  end\nend\n\npicker = ColorPicker.new(0xFF0000FF)\n\nenum UserEventType\n  COLOR_PICKED\n  DRAWING_CREATED\nend\n\nevent = LibSDL::UserEvent.new(\n  type: user_event_type,\n  code: UserEventType::COLOR_PICKED,\n  data1: pointerof(picker.color),\n  data2: nil)\n\nLibSDL.push_event(pointerof(event))\n</code></pre><pre><code>$ crystal app.cr\n\n# In app.cr\n\n# data1: pointerof(picker.color),\n# Error: can't take address of picker.color\n\n# LibSDL.push_event(pointerof(event))\n# Error: argument 'event' of 'LibSDL#push_event' must be Pointer(LibSDL::Event), not Pointer(LibSDL::UserEvent)\n</code></pre><pre><code># shard.yml\nname: SDL\nversion: 0.1.0\ndependencies:\n  sdl-crystal-bindings:\n    github: Hadeweka/SDL-Crystal-Bindings\n    branch: sdl2v0_2_1\n</code></pre><pre><code># sdl-crystal-bindings.cr\n# ...\nunion Event\n  type : UInt32\n  common : CommonEvent\n  display : DisplayEvent\n  window : WindowEvent\n  ...\n  user : UserEvent\n  ...\nend\n# ...\nstruct UserEvent\n  type : UInt32\n  timestamp : UInt32\n  window_id : UInt32\n  code : Int32\n  data1 : Void*\n  data2 : Void*\nend\n# ...\nfun push_event = SDL_PushEvent(event : Event*) : LibC::Int\n# ...\n</code></pre><p><small>12 posts - 3 participants</small></p>","contentLength":1211,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Impact of `--release` vs `-O3`","url":"https://forum.crystal-lang.org/t/impact-of-release-vs-o3/8113","date":1748712688,"author":"jgaskins","guid":12,"unread":true,"content":"<p>I’m trying to iterate quickly on an app I’m working on in production. Deploying it was taking 5-6 minutes every time I made a change, which is actually pretty decent for continuous deployment but I’m impatient.</p><p>Since the  option is just , I decided to check how the impact of  had vs the plain  on this app for both compilation and runtime. I know LLVM can perform more optimizations if you put it all into a single module, but I’ve never seen what the magnitude of that is on the kinds of apps I write (usually web services and infrastructure tooling). Ary showed some numbers <a href=\"https://forum.crystal-lang.org/t/faster-release-compile-times-but-slightly-worse-performance/3864/8\">here</a>, which are great, but his examples aren’t the kinds of apps that I work on, so I wasn’t sure how impactful it would be.</p><p>Using  instead of  brought my build times on GitHub Actions from 5-6 minutes on paid runners to below 3 minutes (builds and deploys are not yet being gated behind CI — I’m running specs locally):</p><p>Build times this fast are worth a moderate tradeoff in runtime performance, especially since this app is relatively new. Latency between my house and the server makes generating synthetic load difficult (it takes a  of concurrency to saturate the gaps created by that latency), so I ran it against the app running locally. I copied a request as a  command from my browser dev tools and converted it to , hitting an endpoint for an authenticated user that shows all organizations the user is a member of, which makes queries to both Redis and Postgres. I have live data in my local DB, so these are realistic requests.</p><pre><code>$ wrk 'http://localhost:3201/organizations' \\\n  [HEADERS REMOVED FOR BREVITY]\nRunning 10s test @ http://localhost:3201/github_organizations\n  2 threads and 10 connections\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency     1.10ms  314.42us   6.54ms   98.37%\n    Req/Sec     4.63k   131.63     4.81k    75.74%\n  93073 requests in 10.10s, 456.41MB read\nRequests/sec:   9214.29\nTransfer/sec:     45.18MB\n</code></pre><p>Over 9k requests per second is pretty solid, especially for requests that are running several real Redis and Postgres queries. I was like “wait, how much better could  be?”</p><p>Turns out, it’s pretty significant:</p><pre><code>$ wrk 'http://localhost:3202/organizations' \\\n  [HEADERS OMITTED FOR BREVITY]\nRunning 10s test @ http://localhost:3202/github_organizations\n  2 threads and 10 connections\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency   560.38us    1.53ms  40.94ms   97.71%\n    Req/Sec    11.76k   692.11    12.68k    89.11%\n  236375 requests in 10.10s, 1.13GB read\nRequests/sec:  23402.55\nTransfer/sec:    114.76MB\n</code></pre><p>About 2.5x as fast for a web app running real database queries just by adding . I knew LLVM performed some great optimizations, but that’s quite a bit more than I expected. I assumed it would be around 50% faster, which still would’ve been worth it for apps that need the performance, but 2.5x is incredible.</p>","contentLength":2887,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"How to check for existance of instance method?","url":"https://forum.crystal-lang.org/t/how-to-check-for-existance-of-instance-method/8111","date":1748611747,"author":"AlexR","guid":11,"unread":true,"content":"<p>Working with abstract classes and their descendants, is it possible to check for the existence of an instance variable or method at runtime ?</p>","contentLength":141,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Compiling and Packaging Crystal GTK4 apps for Windows","url":"https://forum.crystal-lang.org/t/compiling-and-packaging-crystal-gtk4-apps-for-windows/8110","date":1748436352,"author":"GeopJr","guid":10,"unread":true,"content":"<img width=\"500\" height=\"500\" src=\"https://canada1.discourse-cdn.com/flex036/uploads/crystal_lang/optimized/2X/5/5cc46ce408a773d30f1e2c972a85dbc975c31651_2_500x500.jpeg\" data-dominant-color=\"9F7C61\"><p>Crystal's Windows support has been steadily getting more and more usable and with that comes the comm...</p>","contentLength":104,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Zip a multidimensional array with itself","url":"https://forum.crystal-lang.org/t/zip-a-multidimensional-array-with-itself/8109","date":1748366080,"author":"jideelgh","guid":9,"unread":true,"content":"<p>I have a chain where, at some point, .map returns a two-dimensional array, like this:</p><pre><code>...\n.transpose\n.map(&amp;.sort!)\n</code></pre><p>The output would looks like [[1,3][2,4].\nI would like to directly zip the first sub-array with the second one:</p><pre><code>.transpose\n.map(&amp;.sort!)[0].zip(zip with what ? &amp;.[1] ?)  Doesn't work.\n</code></pre><p>That would be a bit like using .tap</p><pre><code>.tap { |a| = a[0].zip(a[1]) }\n</code></pre><p>but with the .tap block returning the modified value and not self (which, obviously, is not what .tap is intended for).\nI tried playing with ‘itself’ also without success.<p>\nAnd (of course) all of this without using intermediary variables, the chain should continue after the ‘zipping’.</p>\nIs it achievable ?</p>","contentLength":672,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Http client tutorial","url":"https://forum.crystal-lang.org/t/http-client-tutorial/8108","date":1748341321,"author":"Fulgurance","guid":8,"unread":true,"content":"<p>Hi guys, I just wanted to ask if someone know a good tutorial/introduction to network protocols ? Because basically I am really good for backend, but I know almost nothing about networking, and I would like to fix this.</p><p>Basically after this, I would like to be able to use the crystal http client</p>","contentLength":295,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Chart of projects","url":"https://forum.crystal-lang.org/t/chart-of-projects/8102","date":1748281581,"author":"ralsina","guid":7,"unread":true,"content":"<p>I used to keep a chart of all the software projects I worked on and how they connected to each other. I just automated it for my crystal projects and … it’s a thing!</p><p>Dotted lines means “planned”, ovals are forks of other people’s projects, round are the ones I started, flag-shaped ones are websites.</p>","contentLength":309,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null}],"tags":["community"]}