{"id":"4RDcb1QCVpCZpB54ijAYcT1W2","title":"Recent Discussions","displayTitle":"Recent Discussions","url":"","feedLink":"","isQuery":true,"isEmpty":false,"isHidden":false,"itemCount":7,"items":[{"title":"Similar to asyncio","url":"https://forum.crystal-lang.org/t/similar-to-asyncio/8744","date":1772405087,"author":"junetxp01","guid":33,"unread":true,"content":"<p>Does Crystal have a library similar to asyncio like in Python?</p>","contentLength":62,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Redis protocol update","url":"https://forum.crystal-lang.org/t/redis-protocol-update/8743","date":1772401112,"author":"jgaskins","guid":32,"unread":true,"content":"<p>I’ve been wanting to update my Redis shard for the past few years to use the RESP3 format, which adds new data types and changes the output format of some existing commands. Details are in <a href=\"https://github.com/jgaskins/redis/issues/68\" rel=\"noopener nofollow ugc\">this issue</a>. I originally kept it on RESP2 because, at the time, nothing was using RESP3. Even the modules owned by Redis Labs (now just called Redis, Inc) were still outputting RESP2 data types.</p><p>The downside is that it’s a pretty breaking change, which is difficult for something like Redis where most applications aren’t using it directly and are instead using it through shards like  and . Both of those shards do dependency management well and would avoid this breaking change until they were ready to upgrade, but others might not.</p><p>Anyway, if anyone’s willing to take a look and offer feedback, that would be helpful.</p>","contentLength":816,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"fast-http-server: Super fast, zero configuration command line HTTP Server","url":"https://old.reddit.com/r/crystal_programming/comments/1rhrcu3/fasthttpserver_super_fast_zero_configuration/","date":1772351177,"author":"/u/sdogruyol","guid":69,"unread":true,"content":"","contentLength":0,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Projects that shouldn't work: doomcr","url":"https://forum.crystal-lang.org/t/projects-that-shouldnt-work-doomcr/8740","date":1772249531,"author":"omarluq","guid":31,"unread":true,"content":"<p>I did a fun and useless thing: put Doom in the terminal with Crystal.\nWhy did I do this? Because why not.<p>\nHonestly I fully expected this to explode. It did not.</p></p><ul><li>shareware  (default)</li><li>Freedoom ()</li></ul><pre data-code-wrap=\"bash\"><code>docker run --rm -it doomcr:latest\ndocker run --rm -it -e DOOM_WAD_SOURCE=freedoom doomcr:latest\n</code></pre><p>You can also mount your own IWAD if you already have one.</p><p>If anyone wants to try it and roast the terminal rendering/input handling, I’m all ears.</p>","contentLength":434,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Error: can't find file 'sanitize'","url":"https://forum.crystal-lang.org/t/error-cant-find-file-sanitize/8739","date":1772182894,"author":"zw963","guid":30,"unread":true,"content":"<p>I run shards install on my project (which use  as development dependencies failed</p><pre data-code-wrap=\"crystal\"><code> ╰──➤ $ shards install\nResolving dependencies\nFetching https://github.com/j8r/tail.cr.git\nFetching https://github.com/crystal-ameba/ameba.git\nFetching https://github.com/vici37/cr-source-typer.git\nFetching https://github.com/petoem/inotify.cr.git\nFetching https://github.com/i3oris/reply.git\nFetching https://github.com/icyleaf/markd.git\nInstalling inotify (1.2.0 at 77b9c80)\nInstalling tail (0.3.1)\nInstalling ameba (1.6.4)\nPostinstall of ameba: shards build -Dpreview_mt\nInstalling markd (0.5.0)\nInstalling reply (0.4.0)\nInstalling source-typer (0.3.5 at 022b9d3)\nPostinstall of source-typer: shards build --without-development\nFailed postinstall of source-typer on shards build --without-development:\nCRYSTAL_WORKERS=\nargs=   --without-development\nI: Resolving dependencies\nI: Fetching https://github.com/icyleaf/markd.git\nI: Fetching https://github.com/i3oris/reply.git\nI: Using markd (0.5.0)\nI: Using reply (0.4.0)\nI: Writing shard.lock\nI: Building: typer\nE: Error target typer failed to compile:\nShowing last frame. Use --error-trace for full trace.\n\nThere was a problem expanding macro 'macro_140407006690976'\n\nCode in /home/zw963/Crystal/share/crystal/src/compiler/crystal/tools/doc/markd_doc_renderer.cr:1:1\n\n 1 | {% if !flag?(:without_libxml2) %}\n     ^\nCalled macro defined in /home/zw963/Crystal/share/crystal/src/compiler/crystal/tools/doc/markd_doc_renderer.cr:1:1\n\n 1 | {% if !flag?(:without_libxml2) %}\n\nWhich expanded to:\n\n   1 |\n &gt; 2 |   require \"sanitize\"\n         ^\nError: can't find file 'sanitize'\n\nIf you're trying to require a shard:\n- Did you remember to run `shards install`?\n- Did you make sure you're running the compiler in the same directory as your shard.yml?\n</code></pre><p>I notice sanitize is a shards  in the crystal source code, but after I installed my self-compiled crystal compiler.</p><ol><li>not install(copy) following folder into dest install folder\n╰──➤ $ ls lib/</li><li> not include the lib folder</li></ol><p>Could the command I ran during installation be wrong?</p><p>FLAGS=-Dpreview_mt make interpreter=1 stats=1 release=1</p><p>following is the installed files:(no lib)</p><p>```\ntmp\n└── local\n│   └── crystal\n├── bash-completion\n├── fish\n├── man\n```</p><p>Or do I need to do some copying and setup myself?</p>","contentLength":2308,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Crystal spec hangs on Apple Silicon after linking","url":"https://forum.crystal-lang.org/t/crystal-spec-hangs-on-apple-silicon-after-linking/8738","date":1772177996,"author":"hahwul","guid":29,"unread":true,"content":"<p>I’m experiencing an issue where  completes Parse/Semantic and all Codegen stages (bc+obj/linking/dsymutil), but then completely hangs and doesn’t execute the specs.</p><p>Here is the output with </p><pre><code>$ crystal spec\n^C\n\nAborted!\nFinished in 5:40 minutes\n\n$ crystal spec -p -s\nParse:                             00:00:00.000543875 (   1.27MB)\nSemantic (top level):              00:00:00.305503792 ( 199.34MB)\nSemantic (new):                    00:00:00.001553541 ( 199.34MB)\nSemantic (type declarations):      00:00:00.020784875 ( 199.34MB)\nSemantic (abstract def check):     00:00:00.006858708 ( 215.34MB)\nSemantic (restrictions augmenter): 00:00:00.006153750 ( 231.34MB)\nSemantic (ivars initializers):     00:00:00.008899000 ( 231.34MB)\nSemantic (cvars initializers):     00:00:00.087336542 ( 263.39MB)\nSemantic (main):                   00:00:00.894053917 ( 712.27MB)\nSemantic (cleanup):                00:00:00.000304000 ( 712.27MB)\nSemantic (recursive struct check): 00:00:00.000601084 ( 712.27MB)\nCodegen (crystal):                 00:00:00.737221750 ( 777.27MB)\nCodegen (bc+obj):                  00:00:00.511846916 ( 811.27MB)\nCodegen (linking):                 00:00:00.206456875 ( 811.27MB)\ndsymutil:                          00:00:00.209412083 ( 811.27MB)\n\nCodegen (bc+obj):\n - all previous .o files were reused\n^C\n\nAborted!\nFinished in 17.36 seconds\n0 examples, 0 failures, 0 errors, 0 pending\n</code></pre><ul><li><p>Individual specs run fine when executed separately.</p></li><li><p>This issue consistently happens on macOS / Apple Silicon.</p></li><li><p>Clearing the cache () does not fix the issue; it still hangs right after the Codegen/linking stage.</p></li><li><p>CPU Usage: While hanging, both the  process and the compiled  binary sit at 0.0% CPU (State ). I think.. this indicates a deadlock or a blocking wait rather than an infinite loop.</p></li><li><p>You can reproduce this by cloning the <a href=\"https://github.com/owasp-noir/noir\" rel=\"noopener nofollow ugc\">OWASP Noir</a> repository and running .</p></li></ul><ul><li><p>Architecture: Apple Silicon (ARM64)</p></li></ul><p>I suspect this might be a macOS-specific LLVM or spec runner issue, possibly a deadlock when the runner tries to execute the compiled spec binary. Has anyone seen this behavior before, or have any pointers on how to debug this further?</p>","contentLength":2125,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Retriggering a shards postinstall?","url":"https://forum.crystal-lang.org/t/retriggering-a-shards-postinstall/8737","date":1772169651,"author":"Fijxu","guid":28,"unread":true,"content":"<p>Some tools that I use like <a href=\"https://github.com/crystal-ameba/ameba\" rel=\"noopener nofollow ugc\">Ameba</a> and <a href=\"https://github.com/Vici37/cr-source-typer\" rel=\"noopener nofollow ugc\">cr-source-typer</a> execute a postinstall (example: <a href=\"https://github.com/Vici37/cr-source-typer/blob/master/shard.yml#L28\" rel=\"noopener nofollow ugc\">cr-source-typer/shard.yml at master · Vici37/cr-source-typer · GitHub</a> ) and will place it’s executable in the  directory of the current project, but when the system is updated, shared libraries change and then the shard binary has to be rebuilt, but shards does not seem to have an easy way to re trigger the postinstall without removing the dependency from the  file and running <code>shards install &lt;dependency&gt;</code>.</p><p>There is any other way to do it? Would be great is shards could keep track of the installed binaries from dependencies and check if their linked libraries are still valid or something like that.</p>","contentLength":691,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null}],"tags":["community"]}